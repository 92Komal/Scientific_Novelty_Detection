title
Hypothesis Mixture Decoding for Statistical Machine Translation

abstract
This paper presents hypothesis mixture decoding (HM decoding), a new decoding scheme that performs translation reconstruction using hypotheses generated by multiple translation systems. HM decoding involves two decoding stages: first, each component system decodes independently, with the explored search space kept for use in the next step; second, a new search space is constructed by composing existing hypotheses produced by all component systems using a set of rules provided by the HM decoder itself, and a new set of model independent features are used to seek the final best translation from this new search space. Few assumptions are made by our approach about the underlying component systems, enabling us to leverage SMT models based on arbitrary paradigms. We compare our approach with several related techniques, and demonstrate significant BLEU improvements in large-scale Chinese-to-English translation tasks.

Introduction Besides tremendous efforts on constructing more complicated and accurate models for statistical machine translation (SMT)  (Och and Ney, 2004; Chiang, 2005; Galley et al., 2006; Shen et al., 2008; Chiang 2010 ), many researchers have concentrated on the approaches that improve translation quality using information between hypotheses from one or more SMT systems as well. System combination is built on top of the N-best outputs generated by multiple component systems  (Rosti et al., 2007; He et al., 2008; Li et al., 2009b)  which aligns multiple hypotheses to build confusion networks as new search spaces, and outputs the highest scoring paths as the final translations. Consensus decoding, on the other hand, can be based on either single or multiple systems: single system based methods  (Kumar and Byrne, 2004; Tromble et al., 2008; DeNero et al., 2009; Kumar et al., 2009)  re-rank translations produced by a single SMT model using either n-gram posteriors or expected n-gram counts. Because hypotheses generated by a single model are highly correlated, improvements obtained are usually small; recently, dedicated efforts have been made to extend it from single system to multiple systems  (Li et al., 2009a; DeNero et al., 2010; Duan et al., 2010) . Such methods select translations by optimizing consensus models over the combined hypotheses using all component systems' posterior distributions. Although these two types of approaches have shown consistent improvements over the standard Maximum a Posteriori (MAP) decoding scheme, most of them are implemented as post-processing procedures over translations generated by MAP decoders. In this sense, the work of  Li et al. (2009a)  is different in that both partial and full hypotheses are re-ranked during the decoding phase directly using consensus between translations from different SMT systems. However, their method does not change component systems' search spaces. This paper presents hypothesis mixture decoding (HM decoding), a new decoding scheme that performs translation reconstruction using hypotheses generated by multiple component systems. HM decoding involves two decoding stages: first, each component system decodes the source sentence independently, with the explored search space kept for use in the next step; second, a new search space is constructed by composing existing hypo-theses produced by all component systems using a set of rules provided by the HM decoder itself, and a new set of component model independent features are used to seek the final best translation from this new constructed search space. We evaluate by combining two SMT models with state-of-the-art performances on the NIST Chinese-to-English translation tasks. Experimental results show that our approach outperforms the best component SMT system by up to 2.11 BLEU points. Consistent improvements can be observed over several related decoding techniques as well, including word-level system combination, collaborative decoding and model combination. 

 Hypothesis Mixture Decoding 

 Motivation and Overview SMT models based on different paradigms have emerged in the last decade using fairly different levels of linguistic knowledge. Motivated by the success of system combination research, the key contribution of this work is to make more effective use of the extended search spaces from different SMT models in decoding phase directly, rather than just post-processing their final outputs. We first begin with a brief review of single system based SMT decoding, and then illustrate major challenges to this end. Given a source sentence , an SMT decoder seeks for a target translation that best matches as its translation by maximizing the following conditional probability: where is the feature vector that includes a set of system specific features, is the weight vector, is a derivation that can yield and is defined as a sequence of translation rule applications . Figure  1  illustrates a decoding example, in which the final translation is generated by recursively composing partial hypotheses that cover different ranges of the source sentence until the whole input sentence is fully covered, and the feature vector of the final translation is the aggregation of feature vectors of all partial hypotheses used.  1  However, hypotheses generated by different SMT systems cannot be combined directly to form new translations because of two major issues: The first one is the heterogeneous structures of different SMT models. For example, a string-totree system cannot use hypotheses generated by a phrase-based system in decoding procedure, as such hypotheses are based on flat structures, which cannot provide any additional information needed in the syntactic model. The second one is the incompatible feature spaces of different SMT models. For example, even if a phrase-based system can use the lexical forms of hypotheses generated by a syntax-based system without considering syntactic structures, the feature vectors of these hypotheses still cannot be aggregated together in any trivial way, because the feature sets of SMT models based on different paradigms are usually inconsistent. To address these two issues discussed above, we propose HM decoding that performs translation reconstruction using hypotheses generated by multiple component systems.  2  Our method involves two decoding stages depicted as follows: 1. Independent decoding stage, in which each component system decodes input sentences independently based on its own model and search algorithm, and the explored search spaces (translation forests) are kept for use in the next stage. 1 There are also features independent of translation derivations, such as the language model feature. 2 In this paper, we will constrain our discussions within CKYstyle decoders, in which we find translations for all spans of the source sentence. Although standard implementations of phrase-based decoders fall out of this scope, they can be still re-written to work in the CKY-style bottom-up manner at the cost of 1) only BTG-style reordering allowed, and 2) higher time complexity. As a result, any phrase-based SMT system can be used as a component in our HM decoding method. HM decoding can use lexicalized hypotheses of arbitrary SMT models to derive translation, and a set of component model independent features are used to compute translation confidence. We discuss mixture search space construction, details of model and feature designs as well as HM decoding algorithms in Section 2.2, 2.3 and 2.4 respectively. 

 Mixture Search Space Construction Let denote component MT systems, denote the span of a source sentence starting at position and ending at position . We use denoting the search space of predicted by , and denoting the mixture search space of constructed by the HM decoder, which is defined recursively as follows: 

 ? . This rule adds all component systems' search spaces into the mixture search space for use in HM decoding. Thus hypotheses produced by all component systems are still available to the HM decoder. 

 ? , in which and . is a translation rule provided by HM decoder that composes a new hypothesis using smaller hypotheses in the search spaces . These rules further extend with hypotheses generated by the HM decoder itself. Figure  2  shows an example of HM decoding, in which hypotheses generated by two SMT systems are used together to compose new translations. Since search space pruning is the indispensable procedure for all SMT systems, we will omit its explicit expression in the following descriptions and algorithms for convenience. 

 Models and Features Following the common practice in SMT research, we use a linear model to formulate the preference of translation hypotheses in the mixture search space . Formally, we are to find a translation that maximizes the weighted linear combination of a set of real-valued features as follows: where is an HM decoding feature with its corresponding feature weight . In this paper, the HM decoder does not assume the availability of any internal knowledge of the underlying component systems. The HM decoding features are independent of component models as well, which fall into two categories: The first category contains a set of consensusbased features, which are inspired by the success of consensus decoding approaches. These features are described in details as follows: 1) : the n-gram posterior feature of computed based on the component search space generated by : is the posterior probability of an n-gram in , is the number of times that occurs in , equals to 1 when occurs in , and 0 otherwise. : the stemmed n-gram posterior feature of computed based on the stemmed component search space . A word stem dictionary that includes 22,660 entries is used to convert and into their stem forms and by replacing each word into its stem form. This feature is computed similarly to that of . 3) : the n-gram posterior feature of computed based on the mixture search space generated by the HM decoder: is the posterior probability of an n-gram in , is the posterior probability of one translation given based on . 

 4) : the length posterior feature of the specific target hypothesis with length based on the mixture search space generated by the HM decoder: Note here that features in and will be computed when the computations of all the remainder features in two categories have already finished for each in , and they will be used to update current HM decoding model scores. Consensus features based on component search spaces have already shown effectiveness  (Kumar et al., 2009; DeNero et al., 2010; Duan et al., 2010) . We leverage consensus features based on the mixture search space newly generated in HM decoding as well. The length posterior feature  (Zen and Ney, 2006 ) is used to adjust the preference of HM decoder for longer or shorter translations, and the stemmed n-gram posterior features are used to provide more discriminative power for HM decoding and to decrease the effects of morphological changes in words for more accurate computation of consensus statistics. The second feature category contains a set of general features. Although there are more features that can be incorporated into HM decoding besides the ones we list below, we only utilize the most representative ones for convenience: 

 1) : the word count feature. 2) : the language model feature. 3) : the dictionary-based feature that counts how many lexicon pairs can be found in a given translation pair . 4) and : reordering features that penalize the uses of straight and inverted BTG rules during the derivation of in HM decoding. These two features are specific to BTG-based HM decoding (Section 2.4.1): 

 5) and : reordering features that penalize the uses of hierarchical and glue rules during the derivation of in HM decoding. These two features are specific to SCFG-based HM decoding (Section 2.4.2): is the hierarchical rule set provided by the HM decoder itself, equals to 1 when is provided by , and 0 otherwise. 

 6) : the feature that counts how many n-grams in are newly generated by the HM decoder, which cannot be found in all existing component search spaces: equals to 1 when does not exist in , and 0 otherwise. The MERT algorithm  (Och, 2003)  is used to tune weights of HM decoding features. 

 Decoding Algorithms Two CKY-style algorithms for HM decoding are presented in this subsection. The first one is based on BTG  (Wu, 1997) , and the second one is based on SCFG, similar to  Chiang (2005) . 

 BTG-based HM Decoding The first algorithm, BTG-HMD, is presented in Algorithm 1, where hypotheses of two consecutive source spans are composed using two BTG rules: ? Straight rule . It combines translations of two consecutive blocks into a single larger block in a straight order. ? Inverted rule . It combines translations of two consecutive blocks into a single larger block in an inverted order. These two rules are used bottom-up until the whole source sentence is fully covered. We use two reordering rule penalty features, and , to penalize the uses of these two rules. In BTG-HMD, in order to derive translations for a source span , we compose hypotheses of any two smaller spans and using two BTG rules in line 9 and 10, denotes the operations that firstly combine and using one BTG rule and secondly compute HM decoding features for the newly generated hypothesis . We compute HM decoding features for hypotheses contained in all existing component search spaces as well, and add them to . From line 17 to 20, we update current HM decoding scores for all hypotheses in using the n-gram and length posterior features computed based on . When the whole source sentence is fully covered, we return the hypothesis with the maximum model score as the final best translation. 

 SCFG-based HM Decoding The second algorithm, SCFG-HMD, is presented in Algorithm 2. An additional rule set , which is provided by the HM decoder, is used to compose hypotheses. It includes hierarchical rules extracted using Chiang (2005)'s method and glue rules. Two reordering rule penalty features, and , are used to adjust the preferences of using hierarchical rules and glue rules. Compared to BTG-HMD, the key differences in SCFG-HMD are located from line 7 to 11, where the translation for a given span is generated by replacing the non-terminals in a hierarchical rule with their corresponding target translations, is the source span that is covered by the th nonterminal of , is the search space for predicted by the HM decoder. 

 Comparisons to Related Techniques 

 Model Combination and Mixture Model based MBR Decoding Model combination  (DeNero et al., 2010)  is an approach that selects translations from a conjoint search space using information from multiple SMT component models;  Duan et al. (2010)  presents a similar method, which utilizes a mixture model to combine distributions of hypotheses from different systems for Bayes-risk computation, and selects final translations from the combined search spaces using MBR decoding. Both of these two methods share a common limitation: they only re-rank the combined search space, without the capability to generate new translations. In contrast, by reusing hypotheses generated by all component systems in HM decoding, translations beyond any existing search space can be generated. 

 Co-Decoding and Joint Decoding Li  et al. (2009a)  proposes collaborative decoding, an approach that combines translation systems by re-ranking partial and full translations iteratively using n-gram features from the predictions of other member systems. However, in co-decoding, all member systems must work in a synchronous way, and hypotheses between different systems cannot be shared during decoding procedure;  Liu et al. (2009)  proposes joint-decoding, in which multiple SMT models are combined in either translation or derivation levels. However, their method relies on the correspondence between nodes in hypergraph outputs of different models. HM decoding, on the other hand, can use hypotheses from component search spaces directly without any restriction. 

 Hybrid Decoding Hybrid decoding  (Cui et al., 2010)  resembles our approach in the motivation. This method uses the system combination technique in decoding directly to combine partial hypotheses from different SMT models. However, confusion network construction brings high computational complexity. What's more, partial hypotheses generated by confusion network decoding cannot be assigned exact feature values for future use in higher level decoding, and they only use feature values of 1-best hypothesis as an approximation. HM decoding, on the other hand, leverages a set of enriched features, which are computable for all the hypotheses generated by either component systems or the HM decoder. 

 Experiments 

 Data and Metric Experiments are conducted on the NIST Chineseto-English MT tasks.  The NIST 2004 (MT04)   The English side of bilingual corpus plus Xinhua portion of the LDC English Gigaword Version 3.0 are used to train a 5-gram language model. Translation performance is measured in terms of case-insensitive BLEU scores  (Papineni et al., 2002) , which compute the brevity penalty using the shortest reference translation for each segment. Statistical significance is computed using the bootstrap re-sampling approach proposed by  Koehn (2004) . Table  1  gives some data statistics.  

 Component Systems For convenience of comparing HM decoding with several related decoding techniques, we include two state-of-the-art SMT systems as component systems only: ? PB. A phrase-based system  (Xiong et al., 2006)  with one lexicalized reordering model based on the maximum entropy principle. ? DHPB. A string-to-dependency tree-based system  (Shen et al., 2008) , which translates source strings to target dependency trees. A target dependency language model is used as an additional feature. Phrasal rules are extracted on all bilingual data, hierarchical rules used in DHPB and reordering rules used in SCFG-HMD are extracted from a selected data set 3 . Reordering model used in PB is trained on the same selected data set as well. A trigram dependency language model used in DHPB is trained with the outputs from Berkeley parser on all language model training data. 

 Contrastive Techniques We compare HM decoding with three multiplesystem based decoding techniques: ? Word-Level System Combination (SC). We re-implement an IHMM alignment based system combination method proposed by  Li et al. (2009b) . The setting of the N-best candidates used is the same as the original paper. ? Co-decoding (CD). We re-implement it based on  Li et al. (2009a) , with the only difference that only two models are included in our reimplementation, instead of three in theirs. For each test set, co-decoding outputs three results, two for two member systems, and one for the further system combination. ? Model Combination (MC). Different from codecoding, MC produces single one output for each input sentence. We re-implement this method based on DeNero et al. (  2010 ) with two component models included. 

 Comparison to Component Systems We compared HM decoding with two component SMT systems first (in Table  2 ). 30 features are used to annotate each hypothesis in HM decoding, including: 8 n-gram posterior features computed from PB/DHPB forests for ; 8 stemmed n-gram posterior features computed from stemmed PB/DHPB forests for ; 4 n-gram posterior features and 1 length posterior feature computed from the mixture search space of HM decoder for ; 1 LM feature; 1 word count feature; 1 dictionary-based feature; 2 grammarspecified rule penalty features for either BTG-HMD or SCFG-HMD; 4 count features for newly generated n-grams in HM decoding for . All n-gram posteriors are computed using the efficient algorithm proposed by  Kumar et al. (2009  From table 2 we can see, both BTG-HMD and SCFG-HMD outperform decoding results of the best component system (DHPB) with significant improvements: +1.50, +1.76, and +1.26 BLEU points on MT05, MT06, and MT08 for BTG-HMD; +1.43, +1.63 and +1.09 BLEU points on MT05, MT06, and MT08 for SCFG-HMD. We also notice that BTG-HMD performs slight better than SCFG-HMD on test sets. We think the potential reason is that more reordering rules are used in SCFG-HMD to handle phrase movements than BTG-HMD do; however, current HM decoding model lacks the ability to distinguish the qualities of different rules. We also investigate on the effects of different HM-decoding features. For the convenience of comparison, we divide them into five categories: ? Set-1. 8 n-gram posterior features based on 2 component search spaces plus 3 commonly used features (1 LM feature, 1 word count feature and 1 dictionary-based feature). ? Set-2. 8 stemmed n-gram posterior features based on 2 stemmed component search spaces. ? Set-3. 4 n-gram posterior features and 1 length posterior feature based on the mixture search space of the HM decoder. ? Set-4. 2 grammar-specified reordering rule penalty features. ? Set-5. 4 count features for unseen n-grams generated by HM decoder itself. Except for the dictionary-based feature, all the features contained in Set-1 are used by the latest multiple-system based consensus decoding techniques  (DeNero et al., 2010; Duan et al., 2010) . We use them as the starting point. Each time, we add one more feature set and describe the changes of performances by drawing two curves for each HM decoding algorithm on MT08 in Figure  3 . With Set-1 used only, HM-decoding has already outperformed the best component system, which shows the strong contributions of these features as proved in related work; small gains (+0.2 BLEU points) are achieved by using 8 stemmed n-gram posterior features in Set-2, which shows consensus statistics based on n-grams in their stem forms are also helpful; n-gram and length posterior features based on mixture search space bring improvements as well; reordering rule penalty features and count features for unseen n-grams boost newly generated hypotheses specific for HM decoding, and they contribute to the overall improvements. 

 Comparison to System Combination Word-level system combination is state-of-the-art method to improve translation performance using outputs generated by multiple SMT systems. In this paper, we compare our HM decoding with the combination method proposed by  Li et al. (2009b) . Evaluation results are shown in Table  3   Compared to word-level system combination, both BTG-HMD and SCFG-HMD can provide significant improvements. We think the potential reason for these improvements is that, system combination can only use a small portion of the component systems' search spaces; HM decoding, on the other hand, can make full use of the entire translation spaces of all component systems. 

 Comparison to Consensus Decoding Consensus decoding is another decoding technique that motivates our approach. We compare our HM decoding with two latest multiple-system based consensus decoding approaches, co-decoding and model combination. We list the comparison results in Table  4 , in which CD-PB and CD-DHPB denote the translation results of two member systems in co-decoding respectively, CD-Comb denotes the results of further combination using outputs of CD-PB and CD-DHPB, MC denotes the results of model combination. Table  4  shows that after an additional system combination procedure, CD-Comb performs slight better than MC. Both BTG-HMD and SCFG-HMD perform consistent better than CD and MC on all blind test sets, due to its richer generative capability and usage of larger search spaces. 

 System Combination over BTG-HMD and SCFG-HMD Outputs As BTG-HMD and SCFG-HMD are based on two different decoding grammars, we could perform system combination over the outputs of these two settings (SC BTG+SCFG ) for further improvements as well, just as  Li et al. (2009a)  did in co-decoding. We present evaluation results in Table  5 .  After system combination, translation results are significantly better than all decoding approaches investigated in this paper: up to 2.11 BLEU points over the best component system (DHPB), up to 1.07 BLEU points over system combination, up to 0.74 BLEU points over co-decoding, and up to 0.81 BLEU points over model combination. 

 Evaluation of Oracle Translations In the last part, we evaluate the quality of oracle translations on the n-best lists generated by HM decoding and all decoding approaches discussed in this paper. Oracle performances are obtained using the metric of sentence-level BLEU score proposed by  Ye et al. (2007) , and each decoding approach outputs its 1000-best hypotheses, which are used to extract oracle translations.  Results are shown in Table  6 : compared to each single component system, decoding methods based on multiple SMT systems can provide significant improvements on oracle translations; word-level system combination, collaborative decoding and model combination show similar performances, in which CD-Comb performs best; BTG-HMD, SCFG-HMD and SC BTG+SCFG can obtain significant improvements than all the other approaches, and SC BTG+SCFG performs best on all evaluation sets. 

 Conclusion In this paper, we have presented the hypothesis mixture decoding approach to combine multiple SMT models, in which hypotheses generated by multiple component systems are used to compose new translations. HM decoding method integrates the advantages of both system combination and consensus decoding techniques into a unified framework. Experimental results across different NIST Chinese-to-English MT evaluation data sets have validated the effectiveness of our approach. In the future, we will include more SMT models and explore more features, such as syntax-based features, helping to improve the performance of HM decoding. We also plan to investigate more complicated reordering models in HM decoding. Figure 2 : 2 Figure 2: An example of HM decoding, in which the translations surrounded by the dotted lines are newly generated hypotheses. Hypotheses light-shaded come from a phrase-based system, and hypotheses darkshaded come from a syntax-based system. 
